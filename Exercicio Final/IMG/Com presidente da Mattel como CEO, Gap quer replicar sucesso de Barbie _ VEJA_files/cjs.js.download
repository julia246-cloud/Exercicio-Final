var CJS=CJS||{};CJS.start=function(){CJS.init(),CJS.findScripts(),CJS.downloadScripts(),CJS.defer?void 0!==document.readyState&&"complete"===document.readyState?CJS.processScripts():CJS.addHandler(window,"load",CJS.processScripts):(alert("Immediate processing is not currently supported."),CJS.processScripts())},CJS.findScripts=function(){for(var t=document.getElementsByTagName("script"),e=t.length,r=0;r<e;r++){var i=t[r];"text/cjs"===CJS.getAttribute(i,"type")&&void 0===i.cjsfound&&(CJS.aScripts[CJS.aScripts.length]=i,i.cjsfound=!0)}},CJS.downloadScripts=function(){for(var t=CJS.aScripts.length,e=0;e<t;e++){var r=CJS.aScripts[e],i=CJS.getAttribute(r,"data-cjssrc")||CJS.getAttribute(r,"cjssrc");i&&CJS.downloadScript(i)}},CJS.downloadScript=function(t){CJS.dprint("downloading "+t),CJS.bIE||CJS.bOpera?CJS.downloadScriptImage(t):CJS.downloadScriptObject(t)},CJS.downloadScriptImage=function(t){var e=new Image;e.onload=function(){CJS.onloadCallback(t)},e.onerror=function(){CJS.onloadCallback(t)},e.src=t},CJS.downloadScriptObject=function(t){if(void 0===document.body||!document.body)return void setTimeout("CJS.downloadScriptObject('"+t+"')",50);var e=document.createElement("object");e.title="cjsObject",e.data=t,e.width=0,e.height=0,e.onload=function(){CJS.onloadCallback(t)},e.onerror=function(){CJS.onloadCallback(t)},document.body.appendChild(e)},CJS.onloadCallback=function(t){CJS.hLoaded[t]=!0},CJS.execCallback=function(t){if(CJS.dprint("execCallback: "+t),0===CJS.aExecs.length)return void CJS.dprint("ERROR: We finished executing a script but the exec queue is empty: "+t);t==CJS.aExecs[0][0]?CJS.aExecs.splice(0,1):CJS.dprint("ERROR: We finished executing a script that wasn't on the queue: "+t),CJS.aExecs.length&&CJS.execScript(CJS.aExecs[0][0],CJS.aExecs[0][1])},CJS.processScripts=function(){CJS.processNextScript()},CJS.processNextScript=function(){if(CJS.aScripts.length){var t=CJS.aScripts[0];CJS.curScript=t;var e=CJS.getAttribute(t,"data-cjssrc")||CJS.getAttribute(t,"cjssrc"),r=CJS.getAttribute(t,"data-cjsexec")||CJS.getAttribute(t,"cjsexec");if(e)if("false"===r)CJS.aScripts.splice(0,1),setTimeout(CJS.processNextScript,0);else if(CJS.hLoaded[e])CJS.processExternalScript(t,CJS.processNextScript),CJS.aScripts.splice(0,1);else{CJS.dprint("processNextScript: waiting for script "+e),void 0===t.startwait&&(t.startwait=Number(new Date));var i=Number(new Date)-t.startwait;i<CJS.maxWait?setTimeout(CJS.processNextScript,CJS.waitival):console.log("There was an error loading script: "+e)}else CJS.processInlineScript(t),CJS.aScripts.splice(0,1),setTimeout(CJS.processNextScript,0)}else{if(CJS.findScripts(),CJS.aScripts.length)return CJS.downloadScripts(),void setTimeout(CJS.processNextScript,0);document.write=CJS.docwriteOrig,CJS.dprint("DONE processing scripts")}},CJS.processInlineScript=function(t){CJS.curScript=t;var e=t.text;CJS.dprint("processInlineScript: processing script code: "+e.substring(0,64)),CJS.eval(e)},CJS.processExternalScript=function(t,e){var r=CJS.getAttribute(t,"data-cjssrc")||CJS.getAttribute(t,"cjssrc");CJS.dprint("processExternalScript: processing script "+r),CJS.execScript(r,e)},CJS.execScript=function(t,e){if(CJS.dprint("execScript: "+t),0===CJS.aExecs.length)CJS.aExecs[CJS.aExecs.length]=[t,e];else if(t!=CJS.aExecs[0][0])return CJS.dprint("execScript: queueing for later: "+t),void(CJS.aExecs[CJS.aExecs.length]=[t,e]);var r=function(t){switch(typeof t){case"string":t=new Function(t);break;case"function":break;default:t=new Function}return t}(e),i=function(){this.readyState&&"complete"!=this.readyState&&"loaded"!=this.readyState||(CJS.execCallback(t),this.onload=this.onreadystatechange=null,r())},c=document.createElement("script");c.onload=c.onreadystatechange=i,c.src=t;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(c,n)},CJS.eval=function(t){if(window.execScript)window.execScript(t);else{!function(){window.eval.call(window,t)}()}},CJS.init=function(){CJS.bInited=!0,CJS.defer=void 0===CJS.defer||CJS.defer,CJS.aScripts=[],CJS.hLoaded={},CJS.aExecs=[],CJS.bIE=-1!=navigator.userAgent.indexOf("MSIE"),CJS.bChrome=-1!=navigator.userAgent.indexOf("Chrome/"),CJS.bOpera=-1!=navigator.userAgent.indexOf("Opera"),CJS.curScript=null,CJS.maxWait=5e3,CJS.waitival=200,CJS.docwriteOrig=document.write,document.write=CJS.docwrite},CJS.getAttribute=function(t,e){for(var r=t.attributes,i=r.length,c=0;c<i;c++){var n=r[c];if(e===n.nodeName)return n.nodeValue}},CJS.addHandler=function(t,e,r,i){i=!!i,t.addEventListener?t.addEventListener(e,r,i):t.attachEvent?t.attachEvent("on"+e,r):t["on"+e]||(t["on"+e]=r)},"undefined"!=typeof console&&void 0!==console.log?CJS.dprint=function(t){console.log("CJS "+Number(new Date)+": "+t)}:CJS.dprint=function(t){},CJS.docwrite=function(t){if(CJS.curScript){CJS.curScript.docwriteTarget||(CJS.curScript.docwriteTarget=document.createElement("span"),CJS.curScript.parentNode.insertBefore(CJS.curScript.docwriteTarget,CJS.curScript));var e=t.indexOf("<script");if(-1===e)CJS.dprint("docwrite: "+t.substring(0,64)),CJS.curScript.docwriteTarget.innerHTML+=t;else{var r=t.indexOf("<\/script>",e)+9;if(-1!=r){var i=t.substring(0,e),c=t.substring(e,r),n=t.substring(r+1);i&&(CJS.dprint("docwrite: "+i.substring(0,64)),CJS.curScript.docwriteTarget.innerHTML+=i+n),CJS.docwriteScript(c)}}}else CJS.dprint("ERROR: There's a problem with the async override of document.write.")},CJS.docwriteScript=function(t){var e=t.match(/src='([^']*)/i)||t.match(/src="([^"]*)/i)||t.match(/src=([^ >]*)/i);if(e){var r=e[1];CJS.dprint("docwriteScript url = "+r);var i=document.createElement("script");i.src=r,document.body.appendChild(i)}},CJS.start();
